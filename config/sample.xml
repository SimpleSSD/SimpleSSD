<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!--
  Copyright (C) 2019 CAMELab

  Author: Donghyun Gouk <kukdh1@camelab.org>
 -->

<?xml version="1.0" encoding="UTF-8" ?>
<!--
  SimpleSSD configuration file.

  Attribute name is case-sensitive.
 -->
<simplessd version="2.1-unknown">
  <!--
    Rule of values

    str:   String, a sequence of alphanumeric characters
    int:   SI integer, a sequence of numeric characters
           Possible suffix (case sensitive):
            10^3 base: k, m, g, t
            2^10 base: K, M, G, T
    float: Floating point number, a sequence of numeric characters
           with one (or none) of decimal point
    bool:  Boolean, a true or false value.
           Possible value (case insensitive):
            True: Non-zero number, T, True, Y, Yes
            False: Otherwise
    time:  SI integer, a sequenced of numeric characters
           If no suffix provided, value will treated as pico-second.
           Possible suffix (case sensitive):
            s, ms, us, ns, ps
   -->
  <!--
    CPU configuration
   -->
  <section name="cpu">
    <!-- <int> CPU clock speed in Hz -->
    <config name="ClockSpeed">400m</config>
    <!--
      <bool> Use dedicated core

      If true, each firmware components runs on dedicated core(s).
      If not, all firmware components shares all cores.
     -->
    <config name="UseDedicatedCore">true</config>
    <!-- <int> # cores for Host Interface (HIL) -->
    <config name="HILCoreCount">1</config>
    <!-- <int> # cores for Data Cache (ICL) -->
    <config name="ICLCoreCount">1</config>
    <!-- <int> # cores for Flash Translation Layer (FTL) -->
    <config name="FTLCoreCount">1</config>
  </section>
  <!--
    Memory subsystem configuration.
   -->
  <section name="memory">
    <!-- SRAM -->
    <section name="sram">
      <!-- <int> Total size of SRAM -->
      <config name="Size">32M</config>
      <!-- <int> Access latency of SRAM in cycle -->
      <config name="Latency">20</config>
      <!-- <int> Access granularity in bytes (for latency calculation) -->
      <config name="LineSize">8</config>
    </section>
    <!-- DRAM -->
    <section name="dram">
      <!--
        <int> DRAM model.

        Possible values:
         0: Simple DRAM model based on atomic dram controller of gem5
         1: DRAM model based on timing dram controller of gem5 <NOT IMPLEMENTED>
       -->
      <config name="Model">0</config>
      <!-- DRAM structural configuration -->
      <section name="struct">
        <!-- <int> # Channel -->
        <config name="Channel">1</config>
        <!-- <int> # Rank / Channel -->
        <config name="Rank">1</config>
        <!-- <int> # Bank / Rank -->
        <config name="Bank">8</config>
        <!-- <int> # Chip / Rank -->
        <config name="Chip">1</config>
        <!-- <int> # Bus width / Chip -->
        <config name="BusWidth">32</config>
        <!-- <int> # Burst length -->
        <config name="BurstLength">8</config>
        <!-- <int> # Chip size in bytes -->
        <config name="ChipSize">1073741824</config>
      </section>
      <!--
        DRAM timing configuration
        All values in <time>
       -->
      <section name="timing">
        <config name="tCK">1250</config>
        <config name="tRCD">13750</config>
        <config name="tCL">13750</config>
        <config name="tRP">13750</config>
        <config name="tRAS">35000</config>
        <config name="tWR">15000</config>
        <config name="tRTP">7500</config>
        <config name="tBURST"></config>
        <config name="tCCD_L"></config>
        <config name="tRFC">160000</config>
        <config name="tREFI">7800000</config>
        <config name="tWTR">7500</config>
        <config name="tRTW"></config>
        <config name="tCS"></config>
        <config name="tRRD">6000</config>
        <config name="tRRD_L"></config>
        <config name="tXAW"></config>
        <config name="tXP">6000</config>
        <config name="tXPDLL">24000</config>
        <config name="tXS">170000</config>
        <config name="tXSDLL">640000</config>
      </section>
      <!--
        DRAM power configuration
        All values in <float>, current in mA, voltage in V.
       -->
      <section name="power">
        <config name="IDD0_0">40</config>
        <config name="IDD0_1">0</config>
        <config name="IDD2P0_0">12</config>
        <config name="IDD2P0_1">0</config>
        <config name="IDD2P1_0">14</config>
        <config name="IDD2P1_1">0</config>
        <config name="IDD2N_0">21</config>
        <config name="IDD2N_1">0</config>
        <config name="IDD3P0_0">21</config>
        <config name="IDD3P0_1">0</config>
        <config name="IDD3P1_0">21</config>
        <config name="IDD3P1_1">0</config>
        <config name="IDD3N_0">34</config>
        <config name="IDD3N_1">0</config>
        <config name="IDD4R_0">100</config>
        <config name="IDD4R_1">0</config>
        <config name="IDD4W_0">105</config>
        <config name="IDD4W_1">0</config>
        <config name="IDD5_0">182</config>
        <config name="IDD5_1">0</config>
        <config name="IDD6_0">12</config>
        <config name="IDD6_1">0</config>
        <config name="VDD_0">1.350</config>
        <config name="VDD_1">0</config>
      </section>
    </section>
  </section>
  <!--
    Host Interface Layer configuration
   -->
  <section name="hil">
    <!-- <time> Request collection interval -->
    <config name="WorkInterval">1us</config>
    <!-- <int> Internal request queue size -->
    <config name="RequestQueueSize">8</config>
    <!--
      Interface and bus configuration

      NVMe uses "pcie" and "axi"
       PCIe RC -> PCIe -> PCIe EP -> AXI (SSD memory bus)
      SATA uses "pcie", "sata" and "axi"
       PCIe RC -> PCIe -> HBA -> SATA -> SATA PHY -> AXI (SSD memory bus)
      UFS uses "mphy" and "axi"
       System bus -> UFSHCI -> MPHY -> PHY -> AXI (SSD memory bus)
     -->
    <section name="interface">
      <!-- PCIe configuration -->
      <section name="pcie">
        <!-- <int> PCIe Generation (1 ~ 3) -->
        <config name="Generation">3</config>
        <!-- <int> PCIe Lane (1 ~ 32, power of 2) -->
        <config name="Lane">4</config>
      </section>
      <!-- SATA configuration -->
      <section name="sata">
        <!-- <int> SATA Generation (1 ~ 3) -->
        <config name="Generation">3</config>
      </section>
      <!-- MIPI M-PHY configuration -->
      <section name="mphy">
        <!--
          <int> MIPI M-PHY Mode

          Possible values:
           0: HS-G1 (High Speed Gear 1)
           1: HS-G2
           2: HS-G3
           3: HS-G4
         -->
         <config name="Mode">2</config>
         <!-- <int> M-PHY Lane (1 ~ 2) -->
         <config name="Lane">2</config>
      </section>
      <!-- AXI4 configuration -->
      <section name="axi">
        <!-- <int> AXI bus width (32 ~ 1024, power of 2) -->
        <config name="Width">256</config>
        <!-- <int> AXI bus speed in Hz -->
        <config name="Clock">100m</config>
      </section>
    </section>
    <!--
      Disk configuration

      When using NVMe interface, "nsid" attribute specifies corresponding
      Namespace ID.
      When using other interfaces, only "nsid=1" section will be used.
     -->
    <section name="disk" nsid="1">
      <!-- <bool> Enable disk image mount -->
      <config name="EnableDiskImage">false</config>
      <!--
        <bool> Strick size checking

        If true, you must specify disk image which has exactly same size with
        current volume size.
       -->
      <config name="StrickSizecheck">false</config>
      <!--
        <bool> Use copy-on-write mode

        If true, data written to this volume will not saved to disk image.
        Set true when you simulate multiple instances with a disk image.
        Set false when you are creating disk image for simulation.
       -->
      <config name="UseCopyOnWriteDisk">true</config>
      <!-- <str> Path to disk image -->
      <config name="DiskImagePath"></config>
    </section>
    <!--
      NVMe specific configuration
     -->
    <section name="nvme">
      <!-- <int> Maximum number of submission queues -->
      <config name="MaxSQ">16</config>
      <!-- <int> Maximum number of completion queues -->
      <config name="MaxCQ">16</config>
      <!--
        <int> Weighted Round Robin High Priority

        Specify maximum number of high priority requests should be inserted
        before handling medium priority requests.
       -->
      <config name="WRRHigh">2</config>
      <!--
        <int> Weighted Round Robin Medium Priority

        Specify maximum number of medium priority requests should be inserted
        before handling low priority requests.
       -->
      <config name="WRRMedium">2</config>
      <!-- <int> Maximum number of namespaces supported by controller -->
      <config name="MaxNamespace">16</config>
      <!--
        <int> Initial number of namespaces

        Specify number of namespaces to create at beginning. You must specify
        per-namespace configuration sections.
       -->
      <config name="DefaultNamespace">1</config>
      <!--
        <bool> Attach default namespaces to first controller

        Specify true if you want to attach all default namespaces to first NVMe
        controller (which has controller ID 0). If false, you need to attach by
        Namespace Attachment admin command.
       -->
      <config name="AttachDefaultNamespaces">true</config>
      <!--
        Per-namespace configuration

        You may want to add disk section per namespace.
       -->
      <section name="namespace" nsid="1">
        <!--
          <int> Logical Block size

          Must be power of 2, greater than and equal to 512. In Linux, logical
          block size greater than page size (usually 4K) is not supported.
         -->
        <config name="LBASize">512</config>
        <!--
          <int> Capacity in bytes

          Specify 0 to create evenly divided namespaces. This valus should be
          aligned with LBASize.
         -->
        <config name="Capacity">0</config>
      </section>
    </section>
  </section>
</simplessd>
